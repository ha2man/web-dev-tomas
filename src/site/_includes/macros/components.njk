{# 

Use PascalCase to name component macros. This helps avoid shadowing. For
example, if you have a macro named `author()` you cannot call it if you also
have a variable named `author` in the same scope. Name it Author() instead.
Think of it like React components :)

#}

{% macro AuthorInfo(post, author, showSocialMedia) %}
{% set fullName = author.name.given + ' ' + author.name.family %}
<div class="w-author__info">
  <cite class="w-author__name">{{ fullName }}</cite>
  {% if showSocialMedia %}
  <ul class="w-author__link-list">
    {% if author.twitter %}
    <li class="w-author__link-listitem">
      <a href="https://twitter.com/{{ author.twitter }}">Twitter</a>
    </li>
    {% endif %}
    {% if author.github %}
    <li class="w-author__link-listitem">
      <a href="https://github.com/{{ author.github }}">GitHub</a>
    </li>
    {% endif %}
    {% if author.glitch %}
    <li class="w-author__link-listitem">
      <a href="https://glitch.com/@{{ author.glitch }}">Glitch</a>
    </li>
    {% endif %}
  </ul>
  {% endif %}
  <time class="w-author__published">{{post.date | prettyDate}}</time>
</div>
{% endmacro %}

{% macro Author(post, author, avatar, showSocialMedia=false) %}
{% set fullName = author.name.given + ' ' + author.name.family %}
<div class="w-author">
  <img class="w-author__image" src="/images/authors/{{ avatar }}.jpg" alt="{{ fullName }}">
  {{ AuthorInfo(post, author, showSocialMedia) }}
</div>
{% endmacro %}

{% macro AuthorSmall(post, author, avatar, showSocialMedia=false) %}
{% set fullName = author.name.given + ' ' + author.name.family %}
<div class="w-author">
  <img class="w-author__image w-author__image--small" src="/images/authors/{{ avatar }}.jpg" alt="{{ fullName }}">
  {{ AuthorInfo(post, author, showSocialMedia) }}
</div>
{% endmacro %}

{# Article cards used on the blog page #}
{% macro Article(post, author) %}
{% set url = post.url | stripLanguage %}
{% set hero = post.data.hero %}
<a href="{{ url }}" class="w-card">
  <article class="w-article">
    <div class="w-article__cover {{ 'w-article__cover--with-image' if hero }}">
      {% if hero %}
      <figure class="w-article__figure">
        <img class="w-article__image" src="{{ url + hero }}" alt="{{ post.data.alt }}">
      </figure>
      {% endif %}

      <h2 class="{{ 'w-article__headline--with-image' if hero else 'w-article__headline' }}">
        {{ post.data.title }}
      </h2>

      {{ AuthorSmall(post, author, post.data.author) }}
    </div>
    <div class="w-article__desc">
      <p class="w-article__summary">
        {{ post.data.description }}
      </p>
    </div>
  </article>
</a>
{% endmacro %}

{# Smaller article cards used on the home page #}
{% macro ArticleSmall(post, author) %}
{% set url = post.url | stripLanguage %}
{% set hero = post.data.hero %}

<a href="{{ url }}" class="w-card w-card--raised">
  <article class="w-article w-article--small">
    <div class="w-article__cover {{ 'w-article__cover--with-image-small' if hero else 'w-article__cover--small' }}">
      {% if hero %}
      <figure class="w-article__figure">
        <img class="w-article__image--small" src="{{ url + hero }}" alt="{{ post.data.alt }}">
      </figure>
      {% endif %}

      <h3 class="w-article__headline {{ 'w-article__headline--with-image-small' if hero else 'w-article__headline--small' }}">
        {{ post.data.title }}
      </h3>
    </div>

    {{ AuthorSmall(post, author, post.data.author) }}
  </article>
</a>
{% endmacro %}